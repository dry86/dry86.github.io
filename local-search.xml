<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>win11 for arm  KB5016629 æ›´æ–°ä½¿ç³»ç»Ÿå´©æºƒ Record</title>
    <link href="/2022/08/14/win11-for-arm-%E6%9B%B4%E6%96%B0%E4%BD%BF%E7%B3%BB%E7%BB%9F%E5%B4%A9%E6%BA%83Record/"/>
    <url>/2022/08/14/win11-for-arm-%E6%9B%B4%E6%96%B0%E4%BD%BF%E7%B3%BB%E7%BB%9F%E5%B4%A9%E6%BA%83Record/</url>
    
    <content type="html"><![CDATA[<h1 id="win11-for-arm-æ›´æ–°ä½¿ç³»ç»Ÿå´©æºƒ-Record"><a href="#win11-for-arm-æ›´æ–°ä½¿ç³»ç»Ÿå´©æºƒ-Record" class="headerlink" title="win11 for arm  æ›´æ–°ä½¿ç³»ç»Ÿå´©æºƒ Record"></a>win11 for arm  æ›´æ–°ä½¿ç³»ç»Ÿå´©æºƒ Record</h1><p><img src="Untitled.png"></p><p>ç”µè„‘æ‰“å¼€æƒ…å†µï¼š</p><p><img src="Untitled-3.png"></p><p>å…·ä½“çš„æ›´æ–°åç§°ï¼š2022-é€‚ç”¨äº Windows 11 çš„ 08 ç´¯ç§¯æ›´æ–°ï¼Œé€‚åˆåŸºäº arm64 çš„ç³»ç»Ÿ (KB5016629)   </p><p>ä¸ç¡®å®šè¿™æ˜¯ä¸æ˜¯ä¸ªä¾‹ï¼Œæˆ‘é€šè¿‡å¦å¤–æ–°å»ºä¸€ä¸ªwin11ï¼Œå°è¯•æ›´æ–°KB5016629ï¼Œå‘ç°ä¾ç„¶ä½¿ç³»ç»Ÿå´©æºƒï¼</p><p>æ­¤ç”µè„‘æ˜¯åœ¨parallel desktop 17 è™šæ‹Ÿæœºä¸­ ï¼šwin11 for armï¼Œå¹³æ—¶å°±ä¸æ€ä¹ˆæ›´æ–°ï¼Œæƒ³ç€æœ‰æ®µæ—¶é—´æ²¡æ›´æ–°äº†ï¼Œæ›´ä¸‹å§ã€‚æ²¡æƒ³åˆ°é‡æ–°å¯åŠ¨ç›´æ¥ windows å´©æºƒ ï¼æ— æ³•å¼€æœºã€‚ğŸ¤¯ğŸ¤¬Â æœ¬æ¥å°±é¹…å¿ƒwindowsçš„è‡ªåŠ¨æ›´æ–°ï¼ŒçœŸå¤Ÿåäººç±»çš„ï¼Œæ¯•ç«Ÿå®ƒæ¯æ¬¡æ›´æ–° ç»å¤§å¤šæ•°ç”¨æˆ·èƒ½æ„ŸçŸ¥åˆ°å—ï¼Ÿä¸çŸ¥é“æœ‰å¤šå°‘ç”µè„‘ä½¿ç”¨è€…è¢«è¿™ä¸ªè‡ªåŠ¨æ›´æ–°å½±å“è¿‡ï¼ æƒ³ç«‹é©¬å…³æœºèµ°äººï¼Ÿå‡†å¤‡å¼€æœºå·¥ä½œï¼Ÿæƒ³é‡å¯ç‚¹é”™ï¼Ÿä½¿ç”¨ç”µæºæ—¶æé†’æ›´æ–°ï¼Ÿè¿™äº›æˆ‘éƒ½é‡åˆ°è¿‡ğŸ˜‡Â </p><hr><p>å¼€å§‹æ‰¾è§£å†³åŠæ³•ï¼š</p><p>é€šè¿‡é«˜çº§é€‰é¡¹ æ‰¾åˆ°cmd é€šè¿‡å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">type</span> C:\Windows\System32\Logfiles\Srt\SrtTrail.txt<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹åˆ°å…·ä½“å‡ºé”™åŸå› ï¼š</p><p>å¯åŠ¨å…³é”®æ–‡ä»¶ï¼š<strong>c:\efi\microsoft\boot\cipolicies\active{cdd5cb55-db68-4d71-aa38-3df2b6473a52}.cipÂ æŸåã€‚</strong></p><p><img src="Untitled-2.png"></p><p>ç½‘ä¸Šæœç´¢æ‰¾åˆ°å‡ ç§æ–¹æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#cmdæ‰§è¡Œ</span><br>sfc /scannow<br></code></pre></td></tr></table></figure><p>æŠ¥ï¼šwindows èµ„æºä¿æŠ¤æ— æ³•æ‰§è¡Œè¯¥è¯·æ±‚</p><p><a href="http://t.csdn.cn/fxOIf">http://t.csdn.cn/fxOIf</a>  é€šè¿‡è¿™ç¯‡åšå®¢  å¼€ï¼šå®‰å…¨æ¨¡å¼ ã€ç¦ç”¨é©±åŠ¨å™¨ç­¾ååŠ è½½ ç­‰ï¼Œå‡ä¸ç®¡ç”¨ï¼Œæ— æ³•æ‰§è¡Œ <code>sfc /scannow</code> å‘½ä»¤ï¼Œä¾ç„¶æŠ¥ èµ„æºä¿æŠ¤ã€‚</p><p>å°è¯•ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">chkdsk X: /R /F <br></code></pre></td></tr></table></figure><p>å€’èƒ½è¿›è¡Œç£ç›˜æ£€æŸ¥ï¼Œä½†å¥½åƒæ²¡å‘ç°ä»€ä¹ˆæŸåé—®é¢˜ï¼Œä¹Ÿæ²¡æœ‰è¿›è¡Œä¿®å¤ã€‚</p><p>åœ¨ç½‘ä¸Šå°±å†æ²¡çœ‹åˆ°å…¶ä»–æœ‰ç”¨çš„æ–¹æ³•ã€‚</p><p>æœ€åè¿˜æ˜¯èµ°äº†é‡ç½®çš„è·¯ã€‚</p><p>é‡ç½®é€‰æ‹©ä¿ç•™ä¸ªäººæ–‡ä»¶</p><p>é‡ç½®åå‘ç°Cç›˜ä¸‹ä¸ªäººåˆ›å»ºçš„æ–‡ä»¶å¤¹éƒ½è¿˜åœ¨ï¼Œè¯´æ˜æ•°æ®ä¸¢å¤±è¿˜ä¸æ˜¯å¾ˆä¸¥é‡ï¼æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½æ²¡æœ‰äº†ï¼Œé‡ç½®åä¼šç»™ä¸€ä¸ªåˆ æ‰çš„APP åˆ—è¡¨ã€‚</p><p>å¼€å§‹é‡æ–°ä¸‹è½¯ä»¶ ã€æ¢å¤åˆ°å´©æºƒå‰çš„æ­£å¸¸æƒ…å†µã€‚ã€‚ å†æ—¶æ•´æ•´2å¤©ï¼</p><p>å½“ç„¶é‡ç½®ç”µè„‘åç¬¬ä¸€ä»¶äº‹ï¼šå½»åº•å…³é—­äº†winæ›´æ–°ğŸ˜¤</p><p>å…·ä½“æ–¹å¼ä½¿ç”¨äº†è¿™ç¯‡æ–‡ç« ä¸­çš„æ·»åŠ æ³¨å†Œè¡¨:  <a href="https://www.disktool.cn/content-center/stop-windows-11-update-666.html#:~:text=%E5%A6%82%E4%BD%95%E5%81%9C%E6%AD%A2Win11%E6%9B%B4%E6%96%B0%EF%BC%9F%201%20%E6%96%B9%E6%A1%88%E4%B8%80%EF%BC%9A%E4%BD%BF%E7%94%A8%E6%B3%A8%E5%86%8C%E8%A1%A8%E7%BC%96%E8%BE%91%E5%99%A8%E5%85%B3%E9%97%ADWin11%E6%9B%B4%E6%96%B0%202,%E6%96%B9%E6%A1%88%E4%BA%8C%EF%BC%9A%E4%BD%BF%E7%94%A8%E7%BB%84%E7%AD%96%E7%95%A5%E7%BC%96%E8%BE%91%E5%99%A8%E5%85%B3%E9%97%ADWin11%E6%9B%B4%E6%96%B0%203%20%E6%96%B9%E6%A1%88%E4%B8%89%EF%BC%9A%E4%BD%BF%E7%94%A8Windows%E8%AE%BE%E7%BD%AE%E5%85%B3%E9%97%ADWin11%E6%9B%B4%E6%96%B0....%204%20%E6%96%B9%E6%A1%88%E5%9B%9B%EF%BC%9A%E4%BD%BF%E7%94%A8%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%85%B3%E9%97%ADWin11%E6%9B%B4%E6%96%B0">å¦‚ä½•å½»åº•å…³é—­win11æ›´æ–°</a> </p><p>ç»å†è¿™æ¬¡å´©æºƒåï¼Œæ„è¯†åˆ°å¤‡ä»½çš„é‡è¦æ€§ã€‚è¿›è¡Œé‡è¦æ“ä½œæ—¶ï¼ŒåŠ¡å¿…å¤‡ä»½é‡è¦æ–‡ä»¶ã€è™šæ‹Ÿæœºæ‹å¿«ç…§ç­‰æ–¹å¼ï¼</p><p>çˆ±æŠ¤ç”µè„‘ï¼Œä»ä¸æ›´æ–°å¼€å§‹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Windows11</category>
      
      <category>ARM</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MacOS(M1)</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç†Ÿæ‚‰JNIæœºåˆ¶-Ideaä¸‹JNIç¼–ç¨‹</title>
    <link href="/2022/07/05/%E7%86%9F%E6%82%89JNI%E6%9C%BA%E5%88%B6-Idea%E4%B8%8BJNI%E7%BC%96%E7%A8%8B/"/>
    <url>/2022/07/05/%E7%86%9F%E6%82%89JNI%E6%9C%BA%E5%88%B6-Idea%E4%B8%8BJNI%E7%BC%96%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="ç†Ÿæ‚‰JNIæœºåˆ¶-Ideaä¸‹JNIç¼–ç¨‹"><a href="#ç†Ÿæ‚‰JNIæœºåˆ¶-Ideaä¸‹JNIç¼–ç¨‹" class="headerlink" title="ç†Ÿæ‚‰JNIæœºåˆ¶-Ideaä¸‹JNIç¼–ç¨‹"></a>ç†Ÿæ‚‰JNIæœºåˆ¶-Ideaä¸‹JNIç¼–ç¨‹</h1><p>åœ¨IDEAå¹³å°ä¸‹é…ç½®JNIç¼–ç¨‹ç¯å¢ƒï¼Œèƒ½çœå»é‡å¤ç›¸åŒçš„å‘½ä»¤è¡Œæ“ä½œï¼Œåƒï¼šjavahã€gccå‘½ä»¤ï¼ŒèŠ‚çº¦å¼€å‘æ—¶é—´ã€‚</p><p>JNIç¼–ç¨‹å‘½ä»¤è¡Œä¸‹çš„æ“ä½œï¼Œå¯å‚è€ƒï¼š<a href="http://t.csdn.cn/EO09I">http://t.csdn.cn/EO09I</a></p><hr><h2 id="å·¥ç¨‹ç›®å½•å¦‚ä¸‹ï¼š"><a href="#å·¥ç¨‹ç›®å½•å¦‚ä¸‹ï¼š" class="headerlink" title="å·¥ç¨‹ç›®å½•å¦‚ä¸‹ï¼š"></a>å·¥ç¨‹ç›®å½•å¦‚ä¸‹ï¼š</h2><p><img src="Untitled.png"></p><h2 id="1-å†™Javaè°ƒç”¨Cä»£ç "><a href="#1-å†™Javaè°ƒç”¨Cä»£ç " class="headerlink" title="1.å†™Javaè°ƒç”¨Cä»£ç "></a>1.å†™Javaè°ƒç”¨Cä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Demo;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JniHello</span> &#123;<br>    <span class="hljs-keyword">static</span> &#123;<br>        System.loadLibrary(<span class="hljs-string">&quot;Demo_JniHello&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sayhello</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">JniHello</span>().sayhello();<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="2-â€œè‡ªåŠ¨åŒ–â€-javah-ï¼šä½¿ç”¨Idea-External-Tools-ç”Ÿæˆ-hæ–‡ä»¶"><a href="#2-â€œè‡ªåŠ¨åŒ–â€-javah-ï¼šä½¿ç”¨Idea-External-Tools-ç”Ÿæˆ-hæ–‡ä»¶" class="headerlink" title="2.â€œè‡ªåŠ¨åŒ–â€ javah ï¼šä½¿ç”¨Idea External Tools ç”Ÿæˆ.hæ–‡ä»¶"></a>2.â€œè‡ªåŠ¨åŒ–â€ <code>javah</code> ï¼šä½¿ç”¨Idea External Tools ç”Ÿæˆ.hæ–‡ä»¶</h2><p>External Toolsä½ç½®ï¼šPreferenceâ†’Toolsâ†’External Toolsâ†’ +</p><p><img src="Untitled1.png"></p><p>æ ¹æ®é¡¹ç›®çš„å®é™…ç›®å½•é…ç½®å¥½è‡ªåŠ¨åŒ–æ‰§è¡Œå†…å®¹ï¼š</p><p><img src="Untitled2.png"></p><p>åœ¨å½“å‰javaæ–‡ä»¶ä¸‹å³é”®æ‰§è¡Œ<code>javah</code>ï¼Œç”Ÿæˆç›¸åº”çš„å¤´æ–‡ä»¶<code>Demo_JniHello.h</code>ï¼ˆæ–‡ä»¶å†…å®¹è‡ªåŠ¨ç”Ÿæˆï¼‰ï¼š</p><p><img src="Untitled3.png"></p><hr><h2 id="3-å†™Javaè°ƒç”¨çš„Cä»£ç "><a href="#3-å†™Javaè°ƒç”¨çš„Cä»£ç " class="headerlink" title="3.å†™Javaè°ƒç”¨çš„Cä»£ç "></a>3.å†™Javaè°ƒç”¨çš„Cä»£ç </h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;jni.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;Demo_JniHello.h&quot;</span></span><br><br>JNIEXPORT <span class="hljs-type">void</span> JNICALL <span class="hljs-title function_">Java_Demo_JniHello_sayhello</span> <span class="hljs-params">(JNIEnv * env, jobject thisObj)</span>&#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello World!\n&quot;</span>);<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="4-â€œè‡ªåŠ¨åŒ–â€gccå‘½ä»¤ï¼šä½¿ç”¨Idea-External-Tools-ç”Ÿæˆjnilibåº“"><a href="#4-â€œè‡ªåŠ¨åŒ–â€gccå‘½ä»¤ï¼šä½¿ç”¨Idea-External-Tools-ç”Ÿæˆjnilibåº“" class="headerlink" title="4.â€œè‡ªåŠ¨åŒ–â€gccå‘½ä»¤ï¼šä½¿ç”¨Idea External Tools ç”Ÿæˆjnilibåº“"></a>4.â€œè‡ªåŠ¨åŒ–â€<code>gcc</code>å‘½ä»¤ï¼šä½¿ç”¨Idea External Tools ç”Ÿæˆ<code>jnilib</code>åº“</h2><p>ä¸ç¬¬2æ­¥ç›¸åŒï¼Œå…ˆæ–°å»ºä¸€ä¸ªExternal Toolså¹¶é…ç½®å¥½æ‰§è¡Œå†…å®¹ï¼š</p><p><img src="Untitled4.png"></p><p>Argumentsï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">-dynamiclib<br>-I<br>ï¼ˆJDKPathï¼‰<br>$FileRelativeDir$/$FileNameWithoutExtension$.c<br>-o<br>lib$FileNameWithoutExtension$.jnilib<br></code></pre></td></tr></table></figure><p>åœ¨.cæ–‡ä»¶ä¸‹å³é”®æ‰§è¡Œgccå‘½ä»¤ï¼Œç”Ÿæˆ<code>.jnilib</code>æ–‡ä»¶ï¼š</p><ul><li>Linux:Â <code>lib***.so</code></li><li>Win:Â <code>***.dll</code></li><li>Mac:Â <code>lib***.jnilib</code></li></ul><hr><h2 id="5-è¿è¡Œjava"><a href="#5-è¿è¡Œjava" class="headerlink" title="5.è¿è¡Œjava"></a>5.è¿è¡Œjava</h2><p><img src="Untitled5.png"></p><p>è¿è¡Œæ—¶å‡ºç°çš„é—®é¢˜ï¼š</p><p><code>é”™è¯¯: æ‰¾ä¸åˆ° &#39;Demo_JniHello&#39; çš„ç±»æ–‡ä»¶</code></p><p>è§£å†³æ–¹æ³•ï¼š</p><p>æ‰“å¼€Idea Run/Debug Configuration â†’ Add VM optionsï¼š</p><p><img src="Untitled6.png"></p><p>VM optionsï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">-Djava.library.path=$ProjectFileDir$<br></code></pre></td></tr></table></figure><p>å³è®©Idea RunåŠ å…¥å½“å‰çš„java library pathã€‚</p><hr><hr><p>refï¼š</p><p><a href="http://t.csdn.cn/ObNiZ">http://t.csdn.cn/ObNiZ</a></p><p><a href="https://www.cnblogs.com/chaohacker/p/14259183.html">https://www.cnblogs.com/chaohacker/p/14259183.html</a></p>]]></content>
    
    
    <categories>
      
      <category>JNI</category>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MacOS(M1)</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç†Ÿæ‚‰swig-å®ç°javaè°ƒç”¨c/c++</title>
    <link href="/2022/07/05/%E7%86%9F%E6%82%89swig-%E5%AE%9E%E7%8E%B0java%E8%B0%83%E7%94%A8c%20c++%20/"/>
    <url>/2022/07/05/%E7%86%9F%E6%82%89swig-%E5%AE%9E%E7%8E%B0java%E8%B0%83%E7%94%A8c%20c++%20/</url>
    
    <content type="html"><![CDATA[<h1 id="ç†Ÿæ‚‰swig-å®ç°javaè°ƒç”¨c-c"><a href="#ç†Ÿæ‚‰swig-å®ç°javaè°ƒç”¨c-c" class="headerlink" title="ç†Ÿæ‚‰swig-å®ç°javaè°ƒç”¨c/c++"></a>ç†Ÿæ‚‰swig-å®ç°javaè°ƒç”¨c/c++</h1><p>SWIG(Simplified Wrapper and Interface Generator)ï¼Œæ˜¯ä¸€æ¬¾å¼€æºè½¯ä»¶ï¼Œå…¶ç›®çš„æ˜¯å°†C/C++ç¼–å†™çš„å‡½æ•°åº“å°è£…æˆå…¶ä»–è¯­è¨€çš„æ¥å£ï¼ŒåŒ…æ‹¬:Java, Python, Perl, Ruby, C#, PHPç­‰è¯¸å¤šä¸»æµç¼–ç¨‹è¯­è¨€ã€‚SWIGåº•å±‚ä»ç„¶è¿˜æ˜¯JNIã€‚</p><p>Swigå¯åº”ç”¨äºåŒ…æ‹¬windowsã€mac os xå’Œlinuxåœ¨å†…çš„å¤§å¤šæ•°æ“ä½œç³»ç»Ÿå¹³å°ã€‚ä½¿ç”¨swigéœ€è¦ç”Ÿæˆä¸€ä¸ª.içš„æ¥å£æ–‡ä»¶ï¼Œswigæ¥å£æ–‡ä»¶åŒ…å«å‡½æ•°åŸå‹ã€ç±»å’Œå˜é‡å£°æ˜ï¼Œå®ƒçš„è¯­æ³•å’Œæ™®é€šçš„c/c++å¤´æ–‡ä»¶ä¸€æ ·ã€‚é™¤äº†c/c++å…³é”®å­—å’Œé¢„å¤„ç†å™¨æŒ‡ä»¤ï¼Œæ¥å£æ–‡ä»¶è¿˜åŒ…å«swigç‰¹æœ‰çš„é¢„å¤„ç†å™¨æŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤å¯ç”¨äºä¼˜åŒ–ç”Ÿæˆå°è£…ä»£ç ã€‚</p><p>Swig ç½‘ç«™ï¼š<a href="https://www.swig.org/">https://www.swig.org/</a></p><p>Swig github ï¼š<a href="https://github.com/swig/swig">https://github.com/swig/swig</a></p><h2 id="Swigçš„å®‰è£…ï¼ˆmacOSï¼‰"><a href="#Swigçš„å®‰è£…ï¼ˆmacOSï¼‰" class="headerlink" title="Swigçš„å®‰è£…ï¼ˆmacOSï¼‰"></a>Swigçš„å®‰è£…ï¼ˆmacOSï¼‰</h2><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs bash">brew install swig<br></code></pre></td></tr></table></figure><hr><h2 id="Swigçš„ä½¿ç”¨æ­¥éª¤"><a href="#Swigçš„ä½¿ç”¨æ­¥éª¤" class="headerlink" title="Swigçš„ä½¿ç”¨æ­¥éª¤"></a>Swigçš„ä½¿ç”¨æ­¥éª¤</h2><hr><h3 id="javaè·å–cæ–‡ä»¶ä¸­çš„å˜é‡å€¼"><a href="#javaè·å–cæ–‡ä»¶ä¸­çš„å˜é‡å€¼" class="headerlink" title="javaè·å–cæ–‡ä»¶ä¸­çš„å˜é‡å€¼"></a>javaè·å–cæ–‡ä»¶ä¸­çš„å˜é‡å€¼</h3><hr><ol><li>example.h</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> counter = <span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure><ol start="2"><li>example.i</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">%module example  <br>%&#123;  <br><span class="hljs-comment">#include &quot;example.h&quot;  </span><br>%&#125;  <br>  <br>extern int counter;<br><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">swig -java example.i<br></code></pre></td></tr></table></figure><ol start="3"><li>test.java</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">test</span> &#123;<br>    <span class="hljs-keyword">static</span> &#123;  <br>System.setProperty(<span class="hljs-string">&quot;java.library.path&quot;</span>, <span class="hljs-string">&quot;.&quot;</span>);<br>        System.loadLibrary(<span class="hljs-string">&quot;example&quot;</span>);  <br>      &#125;  <br>      <br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;  <br>        System.out.println(example.getCounter());  <br>        example.setCounter(<span class="hljs-number">1</span>);  <br>        System.out.println(example.getCounter());  <br>      &#125; <br><br>&#125;<br></code></pre></td></tr></table></figure><ol start="4"><li>ç»ˆç«¯æ‰§è¡Œ</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>gcc -dynamiclib -I /Users/dry/Library/Java/JavaVirtualMachines/azul-1.8.0_312/Contents/Home/include  *.c -o libexample.dylib<br>javac -d . *.java<br>java <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><p>gcc -I åé¢çš„è·¯å¾„æ˜¯ æœ¬æœº jni æ‰€åœ¨è·¯å¾„ ï¼ˆé€šè¿‡jdkæ‰€åœ¨ç›®å½•æŸ¥æ‰¾ï¼‰</p><hr><p>javaä½¿ç”¨cå‡½æ•°</p><hr><ol><li>example.c</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* File : example.c */</span>  <br>  <br><span class="hljs-comment">/* A global variable */</span>  <br><span class="hljs-type">double</span> Foo = <span class="hljs-number">3.0</span>;  <br>  <br><span class="hljs-comment">/* Compute the greatest common divisor of positive integers */</span>  <br><span class="hljs-type">int</span> <span class="hljs-title function_">gcd</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;  <br>  <span class="hljs-type">int</span> g;  <br>  g = y;  <br>  <span class="hljs-keyword">while</span> (x &gt; <span class="hljs-number">0</span>) &#123;  <br>    g = x;  <br>    x = y % x;  <br>    y = g;  <br>  &#125;  <br>  <span class="hljs-keyword">return</span> g;  <br>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li>example.i</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* File : example.i */</span>  <br>%module example  <br>  <br>%<span class="hljs-keyword">inline</span> %&#123;  <br><span class="hljs-keyword">extern</span> <span class="hljs-type">int</span>    <span class="hljs-title function_">gcd</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span>;  <br><span class="hljs-keyword">extern</span> <span class="hljs-type">double</span> Foo;  <br>%&#125;<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">swig -java example.i    <span class="hljs-comment"># ç”Ÿæˆexample_wrap.c / example.java / exampleJNI.javaæ–‡ä»¶</span><br></code></pre></td></tr></table></figure><ol start="3"><li>test.java</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">test</span> &#123;<br><br>    <span class="hljs-keyword">static</span> &#123;  <br>        <span class="hljs-keyword">try</span> &#123;  <br>        System.loadLibrary(<span class="hljs-string">&quot;example&quot;</span>);  <br>        &#125; <span class="hljs-keyword">catch</span> (UnsatisfiedLinkError e) &#123;  <br>          System.err.println(<span class="hljs-string">&quot;Native code library failed to load. See the chapter on Dynamic Linking Problems in the SWIG Java documentation for help.\n&quot;</span> + e);  <br>          System.exit(<span class="hljs-number">1</span>);  <br>        &#125;  <br>    &#125;  <br>      <br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String argv[])</span> &#123;  <br>        <span class="hljs-comment">// Call our gcd() function  </span><br>          <br>        <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">42</span>;  <br>        <span class="hljs-type">int</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> <span class="hljs-number">105</span>;  <br>        <span class="hljs-type">int</span> <span class="hljs-variable">g</span> <span class="hljs-operator">=</span> example.gcd(x,y);  <br>        System.out.println(<span class="hljs-string">&quot;The gcd of &quot;</span> + x + <span class="hljs-string">&quot; and &quot;</span> + y + <span class="hljs-string">&quot; is &quot;</span> + g);  <br>          <br>        <span class="hljs-comment">// Manipulate the Foo global variable  </span><br>          <br>        <span class="hljs-comment">// Output its current value  </span><br>        System.out.println(<span class="hljs-string">&quot;Foo = &quot;</span> + example.getFoo());  <br>          <br>        <span class="hljs-comment">// Change its value  </span><br>        example.setFoo(<span class="hljs-number">3.1415926</span>);  <br>          <br>        <span class="hljs-comment">// See if the change took effect  </span><br>        System.out.println(<span class="hljs-string">&quot;Foo = &quot;</span> + example.getFoo());  <br>      &#125; <br>&#125;<br></code></pre></td></tr></table></figure><ol start="4"><li>ç»ˆç«¯è¿è¡Œ</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -dynamiclib -I /Users/dry/Library/Java/JavaVirtualMachines/azul-1.8.0_312/Contents/Home/include  *.c -o libexample.dylib<br>javac -d . *.java<br>java <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><p><img src="Untitled.png" alt="Running"></p><hr><p>Refï¼š</p><p><a href="https://www.jianshu.com/p/8d8fdb095f88">https://www.jianshu.com/p/8d8fdb095f88</a></p><p><a href="https://juejin.cn/post/6844903581095559175">https://juejin.cn/post/6844903581095559175</a></p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MacOS(M1)</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç†Ÿæ‚‰JNAæœºåˆ¶-å®ç°Javaè°ƒç”¨Cï¼šHelloWorldå’Œç®€å•ä¾‹å­</title>
    <link href="/2022/04/04/%E7%86%9F%E6%82%89JNA%E6%9C%BA%E5%88%B6/"/>
    <url>/2022/04/04/%E7%86%9F%E6%82%89JNA%E6%9C%BA%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="ç†Ÿæ‚‰JNAæœºåˆ¶"><a href="#ç†Ÿæ‚‰JNAæœºåˆ¶" class="headerlink" title="ç†Ÿæ‚‰JNAæœºåˆ¶"></a>ç†Ÿæ‚‰JNAæœºåˆ¶</h1><p>JNAæ¡†æ¶æ˜¯ä¸€ä¸ªå¼€æºçš„Javaæ¡†æ¶ï¼Œæ˜¯å»ºç«‹åœ¨ç»å…¸çš„JNIåŸºç¡€ä¹‹ä¸Šçš„ä¸€ä¸ªæ¡†æ¶ã€‚<br>JNAä½¿ç”¨ä¸€ä¸ªå°å‹çš„JNIåº“æ’æ¡©ç¨‹åºæ¥åŠ¨æ€è°ƒç”¨æœ¬åœ°ä»£ç ã€‚<br>JNAæ˜¯å»ºç«‹åœ¨JNIæŠ€æœ¯åŸºç¡€ä¹‹ä¸Šçš„ä¸€ä¸ªJavaç±»åº“ï¼Œå®ƒä½¿æ‚¨å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨javaç›´æ¥è®¿é—®åŠ¨æ€é“¾æ¥åº“ä¸­çš„å‡½æ•°ã€‚<br>åŸæ¥ä½¿ç”¨JNIï¼Œä½ å¿…é¡»æ‰‹å·¥ç”¨Cå†™ä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“ï¼Œåœ¨Cè¯­è¨€ä¸­æ˜ å°„Javaçš„æ•°æ®ç±»å‹ã€‚<br>JNAä¸­ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªåŠ¨æ€çš„Cè¯­è¨€ç¼–å†™çš„è½¬å‘å™¨ï¼Œå¯ä»¥è‡ªåŠ¨å®ç°Javaå’ŒCçš„æ•°æ®ç±»å‹æ˜ å°„ï¼Œä¸å†éœ€è¦ç¼–å†™CåŠ¨æ€é“¾æ¥åº“ã€‚</p><h2 id="åœ¨Ideaä¸­ä½¿ç”¨JNAï¼š"><a href="#åœ¨Ideaä¸­ä½¿ç”¨JNAï¼š" class="headerlink" title="åœ¨Ideaä¸­ä½¿ç”¨JNAï¼š"></a>åœ¨Ideaä¸­ä½¿ç”¨JNAï¼š</h2><ol><li>è·å–åˆ°JNA.jar</li></ol><p><a href="https://github.com/java-native-access/jna">GitHub - java-native-access/jna: Java Native Access</a></p><p><a href="https://repo1.maven.org/maven2/net/java/dev/jna/jna/5.11.0/jna-5.11.0.jar"></a></p><ol start="2"><li>åœ¨Ideaåˆ›å»ºJavaé¡¹ç›®ï¼Œå¯¼å…¥JARåŒ…<br>Idea: File â†’ Project Structure â†’ Libraries â†’ â€œ+â€<br>å°†ä¸‹è½½çš„jna.jar åŠ å…¥åˆ°é¡¹ç›®ä¸­</li></ol><p><img src="import.png" alt="å¯¼å…¥JaråŒ…"></p><ol><li>åœ¨é¡¹ç›®srcæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºTest.java:</li></ol><figure class="highlight java"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.sun.jna.Library;<br><span class="hljs-keyword">import</span> com.sun.jna.Native;<br><span class="hljs-keyword">import</span> com.sun.jna.Platform;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> &#123;<br>    <span class="hljs-comment">// This is the standard, stable way of mapping, which supports extensive</span><br>    <span class="hljs-comment">// customization and mapping of Java to native types.</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">CLibrary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Library</span> &#123;<br>        <span class="hljs-type">CLibrary</span> <span class="hljs-variable">INSTANCE</span> <span class="hljs-operator">=</span> (CLibrary)<br>                Native.loadLibrary((Platform.isWindows() ? <span class="hljs-string">&quot;msvcrt&quot;</span> : <span class="hljs-string">&quot;c&quot;</span>),<br>                        CLibrary.class);<br><br>        <span class="hljs-keyword">void</span> <span class="hljs-title function_">printf</span><span class="hljs-params">(String format, Object... args)</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">j</span>  <span class="hljs-operator">=</span> <span class="hljs-number">1</span> ;<br>        CLibrary.INSTANCE.printf(<span class="hljs-string">&quot;Hello,%d World\n&quot;</span>,j);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i &lt; args.length;i++) &#123;<br>            CLibrary.INSTANCE.printf(<span class="hljs-string">&quot;Argument %d: %s\n&quot;</span>, i, args[i]);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="4"><li>ç›´æ¥è¿è¡Œï¼š</li></ol><p><img src="helloworld.png" alt="HelloWorld"></p><h1 id="JNA-Exampleï¼š"><a href="#JNA-Exampleï¼š" class="headerlink" title="JNA Exampleï¼š"></a>JNA Exampleï¼š</h1><p><a href="https://www.eshayne.com/jnaex/index.html">JNA Examples</a></p><h1 id="ä½¿ç”¨Example"><a href="#ä½¿ç”¨Example" class="headerlink" title="ä½¿ç”¨Example"></a>ä½¿ç”¨Example</h1><h2 id="Exampleå…¥é—¨ï¼šExample-1-Send-and-Receive-an-Integer"><a href="#Exampleå…¥é—¨ï¼šExample-1-Send-and-Receive-an-Integer" class="headerlink" title="Exampleå…¥é—¨ï¼šExample #1:Â Send and Receive an Integer"></a>Exampleå…¥é—¨ï¼š<strong>Example #1:Â Send and Receive an Integer</strong></h2><ol><li>æ–°å»ºexample.cæ–‡ä»¶ï¼š</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">example1</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span><br>&#123;<br>    <span class="hljs-keyword">return</span> val * <span class="hljs-number">2</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol><li>åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ç»ˆç«¯è¿è¡Œï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc -dynamiclib -o libtestlib.dylib example.c<br></code></pre></td></tr></table></figure><p>ç”ŸæˆJavaè°ƒç”¨éœ€è¦çš„åŠ¨æ€é“¾æ¥åº“</p><ol><li>æ–°å»ºIntegerç±»æ–‡ä»¶ï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.sun.jna.Library;<br><span class="hljs-keyword">import</span> com.sun.jna.Native;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Integer</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">CLibrary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Library</span> &#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">example1</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">CLibrary</span> <span class="hljs-variable">clib</span> <span class="hljs-operator">=</span> (CLibrary) Native.loadLibrary(<span class="hljs-string">&quot;libtestlib&quot;</span>, CLibrary.class);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">newVal</span> <span class="hljs-operator">=</span> clib.example1(<span class="hljs-number">23</span>);<br>        System.out.println(<span class="hljs-string">&quot;example 1: &quot;</span> + newVal);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol><li>è¿è¡Œ</li></ol><p><img src="example1.png" alt="example #1"></p><h2 id="è¿‡ç¨‹ä¸­å‡ºç°çš„é—®é¢˜ï¼š"><a href="#è¿‡ç¨‹ä¸­å‡ºç°çš„é—®é¢˜ï¼š" class="headerlink" title="è¿‡ç¨‹ä¸­å‡ºç°çš„é—®é¢˜ï¼š"></a>è¿‡ç¨‹ä¸­å‡ºç°çš„é—®é¢˜ï¼š</h2><p>è¿è¡Œå‡ºç°<code>Native library (darwin-aarch64/liblibtestlib.dylib) not found in resource path</code>é—®é¢˜</p><ul><li>è§£å†³ï¼š  å°†Native.loadLibrary()æ–¹æ³•ä¸­çš„name æ›´æ”¹ä¸ºç»å¯¹è·¯å¾„ï¼ˆå°†â€œlibtestlibâ€ æ›´æ¢ä¸ºæ­¤æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼‰ï¼Œå³å¯è¿è¡Œ</li></ul><h2 id="Javaè°ƒç”¨C-Struct-ç»“æ„ä½“å‡ºç°çš„é—®é¢˜ï¼š"><a href="#Javaè°ƒç”¨C-Struct-ç»“æ„ä½“å‡ºç°çš„é—®é¢˜ï¼š" class="headerlink" title="Javaè°ƒç”¨C Struct ç»“æ„ä½“å‡ºç°çš„é—®é¢˜ï¼š"></a>Javaè°ƒç”¨C Struct ç»“æ„ä½“å‡ºç°çš„é—®é¢˜ï¼š</h2><p>è¿è¡Œå‡ºç°<code>Structure.getFieldOrder() on class Send_Struct.Test_S_S$CLibrary$Example3Struct$ByReference returns names ([]) which do not match declared field names ([value])</code></p><p>æ­¤ç±»ByReferenceé—®é¢˜ï¼Œåœ¨jna 5.xä¸­ï¼Œéœ€è¦åŠ @FieldOrder()æ³¨è§£</p><p>å¦‚åœ¨Example #3ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Structure</span>.FieldOrder(&#123;<span class="hljs-string">&quot;value&quot;</span>&#125;)<br>        <span class="hljs-keyword">class</span> <span class="hljs-title class_">Example3Struct</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Structure</span> &#123;<br>...<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ByReference</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Example3Struct</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Structure</span>.ByReference &#123;&#125;<br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> value;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¾¿å¯è¿è¡Œã€‚</p><hr><h2 id="Refï¼š"><a href="#Refï¼š" class="headerlink" title="Refï¼š"></a>Refï¼š</h2><p><a href="https://www.cnblogs.com/lanxuezaipiao/p/3635556.html">https://www.cnblogs.com/lanxuezaipiao/p/3635556.html</a><br><a href="https://stackoverflow.nilmap.com/question?dest_url=https://stackoverflow.com/questions/64835834/jna-structure-getfieldorder-does-not-match-declared-field-names">https://stackoverflow.nilmap.com/question?dest_url=https://stackoverflow.com/questions/64835834/jna-structure-getfieldorder-does-not-match-declared-field-names</a></p><p><a href="https://www.saoniuhuo.com/question/detail-2074103.html">https://www.saoniuhuo.com/question/detail-2074103.html</a></p>]]></content>
    
    
    <categories>
      
      <category>JNI</category>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MacOS(M1)</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç†Ÿæ‚‰JNIæœºåˆ¶-Javaè°ƒç”¨C/C++ç®€å•å®ç°(Mac M1)</title>
    <link href="/2022/03/30/%E7%86%9F%E6%82%89JNI%E6%9C%BA%E5%88%B6-Java%E8%B0%83%E7%94%A8C-C-%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/"/>
    <url>/2022/03/30/%E7%86%9F%E6%82%89JNI%E6%9C%BA%E5%88%B6-Java%E8%B0%83%E7%94%A8C-C-%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¼–å†™Javaè°ƒC-ç¨‹åº"><a href="#ç¼–å†™Javaè°ƒC-ç¨‹åº" class="headerlink" title="ç¼–å†™Javaè°ƒC++ç¨‹åº"></a>ç¼–å†™Javaè°ƒC++ç¨‹åº</h1><h2 id="â¬‡ï¸ç¼–å†™javaä»£ç ï¼Œå£°æ˜nativeæ–¹æ³•"><a href="#â¬‡ï¸ç¼–å†™javaä»£ç ï¼Œå£°æ˜nativeæ–¹æ³•" class="headerlink" title="â¬‡ï¸ç¼–å†™javaä»£ç ï¼Œå£°æ˜nativeæ–¹æ³•"></a>â¬‡ï¸ç¼–å†™javaä»£ç ï¼Œå£°æ˜nativeæ–¹æ³•</h2><div class="code-wrapper"><pre><code class="hljs">åˆ›å»ºHelloWorld.javaï¼ˆåœ¨ä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ä¸‹è¿›è¡Œä»¥ä¸‹æ“ä½œï¼‰    å…³é”®å­—native æ¥è¡¨æ˜è¿™ä¸ªæ–¹æ³•ä½¿ç”¨javaä»¥å¤–çš„è¯­è¨€å®ç°</code></pre></div><figure class="highlight arduino"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><pre><code class="hljs arduino">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> native <span class="hljs-type">void</span> <span class="hljs-title">hello</span><span class="hljs-params">()</span></span>;<br><br>    <span class="hljs-type">static</span> &#123;<br>        <span class="hljs-comment">//è®¾ç½®æŸ¥æ‰¾è·¯å¾„ä¸ºå½“å‰é¡¹ç›®è·¯å¾„</span><br>        System.<span class="hljs-built_in">setProperty</span>(<span class="hljs-string">&quot;java.library.path&quot;</span>, <span class="hljs-string">&quot;.&quot;</span>);<br>        <span class="hljs-comment">//åŠ è½½åŠ¨æ€åº“çš„åç§°</span><br>        System.<span class="hljs-built_in">loadLibrary</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span></span>&#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-built_in">HelloWorld</span>().<span class="hljs-built_in">hello</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="â¬‡ï¸javahå‘½ä»¤ç”Ÿæˆ-hæ–‡ä»¶"><a href="#â¬‡ï¸javahå‘½ä»¤ç”Ÿæˆ-hæ–‡ä»¶" class="headerlink" title="â¬‡ï¸javahå‘½ä»¤ç”Ÿæˆ.hæ–‡ä»¶"></a>â¬‡ï¸javahå‘½ä»¤ç”Ÿæˆ.hæ–‡ä»¶</h2><p>ç¼–å†™HelloWorld.h</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">javah </span>HelloWorldï¼ˆ<span class="hljs-keyword">javah </span>åœ¨ <span class="hljs-keyword">javacå‘½ä»¤ä¹‹å‰ï¼Œå¦åˆ™javahæŠ¥æ‰¾ä¸åˆ°ç±»æ–‡ä»¶ï¼‰</span><br></code></pre></td></tr></table></figure><h2 id="â¬‡ï¸ç¼–è¯‘javaä»£ç "><a href="#â¬‡ï¸ç¼–è¯‘javaä»£ç " class="headerlink" title="â¬‡ï¸ç¼–è¯‘javaä»£ç "></a>â¬‡ï¸ç¼–è¯‘javaä»£ç </h2><p>ç”ŸæˆHelloWorld.classæ–‡ä»¶</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">javac </span>HelloWorld.<span class="hljs-keyword">java</span><br></code></pre></td></tr></table></figure><h2 id="â¬‡ï¸ç¼–å†™æœ¬åœ°å®ç°ä»£ç "><a href="#â¬‡ï¸ç¼–å†™æœ¬åœ°å®ç°ä»£ç " class="headerlink" title="â¬‡ï¸ç¼–å†™æœ¬åœ°å®ç°ä»£ç "></a>â¬‡ï¸ç¼–å†™æœ¬åœ°å®ç°ä»£ç </h2><p>åˆ›å»ºHelloWorldlmp.c</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;jni.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;HelloWorld.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> JNICALL <span class="hljs-title">Java_HelloWorld_hello</span><span class="hljs-params">(JNIEnv *env,jobject obj)</span></span>&#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello World!\n&quot;</span>);<br>    <span class="hljs-keyword">return</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è°ƒç”¨C++ -&gt; Cmakeåˆ›å»ºdll åŠ¨æ€åº“<br><code>gcc -dynamiclib -I /Users/dry/Library/Java/JavaVirtualMachines/azul-1.8.0_312/Contents/Home/include  HelloWorldlmp.c -o libhello.jnilib</code></p><div class="code-wrapper"><pre><code class="hljs">å‡ºç°é—®é¢˜ï¼šGcc æ˜¯arm64 ï¼Œ jdk æ˜¯ x86    éœ€è¦å°†jdkè½¬æ¢ä¸º arm64  â¬‡ï¸æ‰€ç¤º    é—®é¢˜ï¼šmach-o file, but is an incompatible architecture (have &#39;arm64&#39;, need &#39;x86_64&#39;)    â¬‡ï¸    ç»ˆç«¯è¾“å…¥ï¼š/usr/libexec/java_home -V    æŸ¥çœ‹jdkè¯¦ç»†ä¿¡æ¯    â¬‡ï¸ç»ˆç«¯åˆ‡æ¢jdk    open ~/.bash_profile    # SWITCH TO JAVA VERSION 8 export JAVA_HOME=`/usr/libexec/java_home -v 1.8`    source ~/.bash_profile</code></pre></div><h2 id="â¡ï¸è¿è¡Œï¼š-java-HelloWorld"><a href="#â¡ï¸è¿è¡Œï¼š-java-HelloWorld" class="headerlink" title="â¡ï¸è¿è¡Œï¼š  java HelloWorld"></a>â¡ï¸è¿è¡Œï¼š  java HelloWorld</h2><p><img src="achieve.png" alt="è°ƒç”¨æˆåŠŸæˆªå›¾"><br><img src="dict.png" alt="ç”¨åˆ°æ–‡ä»¶æˆªå›¾"> </p><hr><p>æ–‡ç« å‚è€ƒ</p><blockquote><p><a href="http://t.csdn.cn/k3aIz">http://t.csdn.cn/k3aIz</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>JNI</category>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MacOS(M1)</tag>
      
    </tags>
    
  </entry>
  
  
  
  
  
  
  <entry>
    <title>about</title>
    <link href="/"/>
    <url>/</url>
    
    <content type="html"><![CDATA[]]></content>
    
  </entry>
  
  
  
</search>
